<!DOCTYPE html>

<html>
<head>

    <meta charset="UTF-8">
    <style scoped="scoped" type="text/css">
        .paragraphDiv {
            margin: 0 1em 0.5em 1em;
        }

        img {
            margin: 10px;
        }

        .cite {
            padding: 1em;
            margin: 1em;
            border-left: solid;
            border-color: #eef2f5;
        }

        .smallGreyText {
            text-align: center;
            color: #999999;
            font-size: 0.6em;
            margin: 1em 0.1em 1em 0.1em;
        }

        .code {
            font-family: monospace;
        }

    </style>

    <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            showMathMenu: false,
            tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"] ],
              processEscapes: true
            }
          });
    </script>



    <!--
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
     -->
    <!--
    <script>setTimeout(function(){ location.reload(); }, 3000);</script>
    -->
</head>
<body>

<br/>

<div class="paragraphDiv">
    <h4>Dlaczego to programowanie nazywa się funkcyjne?</h4>
</div>

<div class="paragraphDiv">
    W <a href="https://michalkulinski.blogspot.com/2019/02/podstawy-programowania-funkcyjnego-epizod-1.html">poprzednim odcinku</a> opowiedziałem ci o co chodzi z tym całym zgiełkiem wokół programowania funcyjnego. Pamietasz: Przejrzystość Referencyjną i pociąg towarowy z wieloma rdzeniami? Skoro jest tu, i czytasz odcinek 2., zakładam, że moje argumenty przekonały Cię i chcesz dowiedzieć się czegoś więcej.
</div>


<div class="smallGreyText">
    <hr/>
    <div>
        Poniższy tekst jest luźnym tłumaczeniem wpisu bloga Roberta Cecila "Wujka Boba" Martina z dnia 02 stycznia 2013
        ze strony:
    </div>
    <br/>

    <div>
        <a href="https://blog.cleancoder.com/uncle-bob/2013/01/02/FPBE2-Whys-it-called-functional.html">https://blog.cleancoder.com/uncle-bob/2013/01/02/FPBE2-Whys-it-called-functional.html</a>
    </div>
    <br/>

    <div>
        Proszę o komentarze, jeżeli ta luźność jest zbyt daleko posunięta.
    </div>
    <hr/>
</div>
<br/>

<div class="paragraphDiv">
    A więc następnym pytaniem, które czeka na odpowiedź jest: Dlaczego to nazywa się "Funkcyjnym" programowaniem? Prostą odpowiedzią na to pytanie jest, że Programowanie Funkcyjne to programowanie przy użyciu funkcji (ehhh). Spośród wszystkich odpowiedzi, ta jest całkiem słaba. No, jest akurat precyzyjna, i brzmi całkiem nieźle; ale tak naprawdę nie odpowiada na nasze pytanie. W końcu, programy napisane w Javie są programami z funkcjami.
</div>

<div class="paragraphDiv">
    A więc dlaczego słowo "funkcyjne"?
</div>

<div class="paragraphDiv">
    Wkurzę pewnie w tej chwili wszystkich matematycznych perfekcjonistów; ponieważ zamierzam użyć analogii z <a
        href="https://pl.wikipedia.org/wiki/Rachunek_r%C3%B3%C5%BCniczkowy_i_ca%C5%82kowy">rachunkiem różniczkowym</a>. Nie będę się tym przejmował za bardzo, bo po prostu ukradłem ten pomysł z Wikipedii.
</div>

<div class="paragraphDiv">
    Czy wiesz, co znaczy $\frac{dy}{dx}$? W szczególności, w wyrażeniu $\frac{dy}{dx}$ czym jest $y$? Oczywiście $y$ jest funkcją. $\frac{dy}{dx}$ jest
    <a href="https://pl.wikipedia.org/wiki/Pochodna_funkcji">pochodną</a> tej funkcji. Czyli $\frac{dy}{dx}$ przyjmuje funkcję jako swój argument wejściowy i zwraca pochodną tej funkcji jako wynik. Mam rację?
</div>

<div class="paragraphDiv">
    Rozważ $\frac{d(x^2)}{dx}$: równa się $2x$. Zauważ, że $2x$ jest funkcją. Więc argument wejściowy i wyjściowa wartość są funkcjami.
</div>

<div class="paragraphDiv">
    Czekaj. Jak nazwiesz coś, co przyjmuje argumenty i zwraca wartość? Nazwiesz to funkcją. A więc $\frac{dy}{dx}$ jest funkcją, która przyjmuje funkcję i zwraca funkcję.
</div>

<div class="paragraphDiv">
    Co by było gdybyśmy mieli taki język programowania komputerów? Co by było gdybyśmy mogli pisać funkcje, które przyjmują funkcje jako argumenty, operować na nich, bez rozwiązywania ich, i potem zwracać nowe funkcje jak wynik? Jak byś taki język mógł nazwać? Jakie inne słowo mogłoby być lepsze niż: funkcyjny?
</div>

<div class="paragraphDiv">
    I już widzę tych purystów języków funkcjonalnych wściekłych na mnie, za to, że to kompletnie nieodpowiedni sposób definicji języka funkcyjnego. Ale to jest jeden krok do przodu &ndash; i to bardzo ważny krok.
</div>

<div class="paragraphDiv">
    A więc, co to znaczy przesłąć funkcję jako argument do innej funkcji? Spójrzy jeszcze raz na program kwadraty liczb całkowitych. Pamiętasz, to było po prostu:
</div>

<div class="paragraphDiv">
    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">(take 25 (squares-of (integers)))
</pre></div>

</div>

<div class="paragraphDiv">
    Zróbmy z tego funkcję, dodając nazwę i definicję argumentu:
</div>

<div class="paragraphDiv">
    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">(<span style="font-weight: bold">defn </span>squint [n]
  (take n (squares-of (integers))))
</pre></div>

</div>

<div class="paragraphDiv">
    Jestem pewny, że ogarniasz składnię sam. To nic trudnego.
</div>

<div class="paragraphDiv">
    Mając definicję <span class="code">squint</span>, możemy wyświetlić 25 kwadratów liczb całkowitych przy użyciu:
</div>


<div class="paragraphDiv">
    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">(println (squint 25))
</pre></div>

</div>

<div class="paragraphDiv">
Jak dotąd, to nic innego, jak tylko proste wywołania funkcji i definicje. Ale czym jest ta funkcja <span class="code">squares-of</span>. Jak jest zdefiniowana?
</div>

<div class="paragraphDiv">
    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">(<span style="font-weight: bold">defn </span>square [n] (* n n))

(<span style="font-weight: bold">defn </span>squares-of [list]
  (map square list))
</pre></div>

</div>

<div class="paragraphDiv">
    Teraz zaczyna się robić trochę bardziej interesująco! Nie jest niespodzianką, że funkcja <span class="code">square</span> po prostu mnoży argument przez jego samego. To definicja <span class="code">squares-of</span> jest interesująca, ponieważ przesyła funkcję <span class="code">square</span> jako argument do funkcji o nazwie <span class="code">map</span>.
</div>

<div class="paragraphDiv">
    Funkcja <span class="code">map</span> jest jedną z podstaw programowania funkcyjnego. Pobiera dwa argumenty: funkcję $f$ i listę $l$; i zwraca nową listę wywołując funkcję $f$ na każdym elemencie listy $l$.
</div>

<div class="paragraphDiv">
    Przesyłanie funkcji jako argument to nie jest coś, co programiści Javy robią często. Z drugiej strony nie jest to zupełnie obcy pomysł. Każdy programista Javy, który uczył się
    <a href="https://pl.wikipedia.org/wiki/Polecenie_(wzorzec_projektowy)">Wzorca Polecenie</a>, lub używał Listenerów w
    <a href="https://en.wikipedia.org/wiki/Swing_(Java)">
        Swingu</a>, zrozumie, co tu się dzieje.
</div>

<div class="paragraphDiv">
    Co więcej, obecnie coraz więcej języków programowania zaczęło wykorzystować pomysł funkcji przekazywanych jako argumenty. Ta funkcjonalność jest czasem nazywana "bloki" lub "lambdy". Jest bardzo częstym elementem języka Ruby; stało się ostatnio ważną częścią C#. Chodzą słuchy, że ta funkcjonalność zostanie dodana w Javie niedługo.<a id="1a" href="#1">[1]</a>
</div>

<div class="paragraphDiv">
    Więc może nie będziemy musieli uczyć się nowego języka. Może nasze stare języki będą stawały się coraz bardziej i bardziej funkcyjne i będziemy mogli używać tych funkcyjnych funkcjonalności, jak tylko staną się on coraz bardziej dostępne.
</div>

<div class="paragraphDiv">
    Ta droga prowadzi do szaleństwa, płaczu i zgrzytania zębami! Język z funkcjonalnościami funkcyjnymi nie jest językiem funkcyjnym; i program napisany z kilkoma lambdami tu i tam, nie jest funkcyjnym programem.
</div>

<div class="paragraphDiv">
    Żeby przekonać się dlaczego to prawda, musimy spojrzeć na funkcję <span class="code">integers</span>.
</div>

<div class="paragraphDiv">
    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">(<span style="font-weight: bold">defn </span>integers []
      (integers-starting-at 1))
</pre></div>

</div>

<div class="paragraphDiv">
    OK, to nie jest za trudne. Funkcja <span class="code">integers-starting-at</span> po prostu przyjmuje liczbę całkowitą jako argument i zwraca listę wszystkich liczb całkowitych zaczynając od tego, co jest w argumencie.
</div>

<div class="paragraphDiv">
    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">(<span style="font-weight: bold">defn </span>integers-starting-at [n]
      (cons n (lazy-seq (integers-starting-at (inc n)))))
</pre></div>

</div>


<div class="paragraphDiv">
    To wymaga słówka wyjaśnienia. Ale nie bój się, to jest właściwie całkiem proste.
</div>

<div class="paragraphDiv">
    Na początku jest funkcja <span class="code">cons</span>; która jest skrótem dla "zbuduj listę" (construct list). Funkcja <span class="code">cons</span> przyjmuje dwa argumenty, element, i listę. Zwraca nową listę jako starą listę z dołożonym z przodu elementem. Czyli <span class="code">(cons 2 [3 4])</span> zwraca
    <span class="code">[2 3 4]</span>.
</div>


<div class="paragraphDiv">
    Teraz z kolei wszyscy ludzie od Clojure są wkurzeni na mnie, bo to nie jest tak do końca. Z drugiej strony różnica jest czymś, czym nie musimy się teraz przejmować. Na tą chwilę zapamiętaj tylko to: <span class="code">cons</span> tworzy listę poprzez dołożenie jego pierwszego elementu do drugiego; który to drugi musi być listą.
</div>

<div class="paragraphDiv">
    Teraz możesz sobie pomyśleć, że <span class="code">cons</span> po prostu przyczepia ten element z przodu listy; ale to nie jest tak. W rzeczywistości, to nie jest nawet bliskie prawdy. Widzisz, <span class="code">cons</span> w żaden sposób nie zmienia listy z drugiego argumentu. Zamiast tego zwraca całkiem nową listę złożoną z zawartości listy z drugiego argumentu i elementu dodanego na początku.
</div>

<div class="paragraphDiv">
    O kurcza, teraz to już ludzie od Clojure są na mnie naprawdę źli; ponieważ to znowu nie do końca prawda. I pewnie masz mnie za wariata, bo co za głupek kopiowałby całą zawartość jednej listy do drugiej listy tylko po to żeby wrzucić jeden element na początek?
</div>

<div class="paragraphDiv">
    OK, więc, tak <span class="code">cons</span> w zasadzie <em>rzeczywiście</em> wkłada element na początek listy, i nie, nie kopiuje starej listy do nowej listy. Zdrugiej strony, robi to w taki sposób, że możesz udawać, że listy wejściowa i wyjściowa są zupełnie inne. Praktycznie rzecz biorąc wyjście <span class="code">cons</span> jest całkowicie nową listą - nawet, jeśli tak nie jest.
</div>


<div class="paragraphDiv">
    Zbity z tropu? Nie martw się, w rzeczywistości to nie jest takie trudne do zrozumienia. Rozważ listę <span class="code">[1 2 3]</span>. Jeżeli zaimplementujemy ją jako
    <a href="https://pl.wikipedia.org/wiki/Lista">listę jednokierunkową</a>, będzie wyglądała tak: <span class="code">1->2->3</span>. Teraz odpalmy <span class="code">cons</span> z 0 na początku. To daje nam
    <span class="code">0->1->2->3</span>. Zauważ jednak, że stara lista nadal istnieje w nowej liście. To jest tajemnica! Stara lista pozostaje niezmienionaw nowej liście. Więc możemy stworzyć pozory, że <span class="code">cons</span> zwróci całkiem nową listę, pozostawiając stara listę niezmienioną.
</div>

<div class="paragraphDiv">
    To jest wskazówka do tego, co te wszystkie języki funkcyjne robią. 
</div>

<!---------- -->


<div class="paragraphDiv">

</div>


<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>


<div class="paragraphDiv">
    <div id="1"><a href="#1a">[1]</a> - Została dodana dopiero 18 marca 2014 roku wraz z 8. wersją Javy. [przyp. tłum.]</div>
</div>




<div class="smallGreyText">
    <hr/>
    <div>
        Powyższy tekst jest luźnym tłumaczeniem wpisu bloga Roberta Cecila "Wujka Boba" Martina z dnia 02 stycznia 2013
        ze strony:
    </div>
    <br/>

    <div>
        <a href="https://blog.cleancoder.com/uncle-bob/2013/01/02/FPBE2-Whys-it-called-functional.html">https://blog.cleancoder.com/uncle-bob/2013/01/02/FPBE2-Whys-it-called-functional.html</a>
    </div>
    <br/>

    <div>
        Proszę o komentarze, jeżeli ta luźność jest zbyt daleko posunięta.
    </div>
    <hr/>
</div>


</body>

</html>